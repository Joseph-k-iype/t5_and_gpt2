PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX ex: <http://example.org/>

CONSTRUCT {
  ?s1 ?p1 ?o1 .
  ?o1 ?p1o ?o1o .
  ?in1 ?pin1 ?s1 .

  ?s2 ?p2 ?o2 .
  ?o2 ?p2o ?o2o .
  ?in2 ?pin2 ?s2 .
}
WHERE {
  {
    # ------- PART 1: For a specific subject of Class1 --------
    ?s1 rdf:type ex:Person .
    FILTER(?s1 = ex:JohnDoe)  # Replace with your actual subject URI

    ?s1 ?p1 ?o1 .

    OPTIONAL {
      ?o1 ?p1o ?o1o .
    }

    OPTIONAL {
      ?in1 ?pin1 ?s1 .
    }
  }
  UNION
  {
    # ------- PART 2: All instances of Class2 --------
    ?s2 rdf:type ex:Organization .
    ?s2 ?p2 ?o2 .

    OPTIONAL {
      ?o2 ?p2o ?o2o .
    }

    OPTIONAL {
      ?in2 ?pin2 ?s2 .
    }
  }
}
