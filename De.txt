graph TB
    subgraph "User Interface Layer"
        UI[Self-Service Portal<br/>Resource Selection & Monitoring]
        API[API Gateway<br/>Enterprise AI Integration]
    end

    subgraph "Policy & Security"
        OPA[Open Policy Agent<br/>Governance & Quotas]
        IAM[Identity & Access<br/>Service Accounts]
    end

    subgraph "Compute Orchestration - GKE"
        CPU[CPU Pool<br/>General Workloads]
        GPU[GPU Pool<br/>ML & AI Tasks]
        MEM[Memory Pool<br/>Data Processing]
    end

    subgraph "Application Services"
        DATA_API[Data API<br/>REST & GraphQL]
        GRAPH_SVC[Graph Service<br/>Cypher Queries]
        PROVISIONER[Compute Provisioner<br/>Dynamic Resources]
    end

    subgraph "Data Storage Layer"
        FALKOR[(FalkorDB<br/>Knowledge Graph)]
        POSTGRES[(PostgreSQL<br/>Metadata & Catalog)]
        REDIS[(Redis<br/>Cache & Queue)]
    end

    subgraph "Semantic Web"
        FUSEKI[Apache Jena Fuseki<br/>SPARQL Endpoint]
        PIPELINE[ETL Pipeline<br/>Graph â†’ RDF Sync]
    end

    subgraph "Data Orchestration"
        COMPOSER[Cloud Composer<br/>Apache Airflow]
    end

    subgraph "Unified Observability"
        PROM[Prometheus<br/>Metrics]
        LOKI[Loki<br/>Logs]
        TEMPO[Tempo<br/>Traces]
        GRAFANA[Grafana<br/>Dashboards]
    end

    subgraph "Infrastructure"
        VPC[Virtual Private Cloud<br/>Network Isolation]
        STORAGE[Cloud Storage<br/>Backups & Archives]
    end

    %% User flows
    UI --> OPA
    API --> IAM
    
    %% Policy enforcement
    OPA --> PROVISIONER
    OPA --> DATA_API
    IAM --> API
    
    %% Provisioning flow
    UI --> PROVISIONER
    PROVISIONER --> CPU
    PROVISIONER --> GPU
    PROVISIONER --> MEM
    
    %% Application layer
    API --> DATA_API
    API --> GRAPH_SVC
    DATA_API --> POSTGRES
    DATA_API --> REDIS
    GRAPH_SVC --> FALKOR
    GRAPH_SVC --> FUSEKI
    
    %% Semantic pipeline
    COMPOSER --> PIPELINE
    PIPELINE --> FALKOR
    PIPELINE --> FUSEKI
    
    %% Observability collection
    CPU -.-> PROM
    GPU -.-> PROM
    DATA_API -.-> PROM
    GRAPH_SVC -.-> LOKI
    PROVISIONER -.-> TEMPO
    FALKOR -.-> PROM
    
    %% Observability unified view
    PROM --> GRAFANA
    LOKI --> GRAFANA
    TEMPO --> GRAFANA
    
    %% Infrastructure
    CPU -.-> VPC
    GPU -.-> VPC
    FALKOR --> STORAGE
    POSTGRES --> STORAGE

    %% Styling with professional colors and white text
    classDef userLayer fill:#1976D2,stroke:#0D47A1,stroke-width:2px,color:#FFF
    classDef policyLayer fill:#F57C00,stroke:#E65100,stroke-width:2px,color:#FFF
    classDef computeLayer fill:#388E3C,stroke:#2E7D32,stroke-width:2px,color:#FFF
    classDef appLayer fill:#7B1FA2,stroke:#6A1B9A,stroke-width:2px,color:#FFF
    classDef dataLayer fill:#1976D2,stroke:#1565C0,stroke-width:3px,color:#FFF
    classDef semanticLayer fill:#F9A825,stroke:#F57F17,stroke-width:2px,color:#FFF
    classDef orchestrationLayer fill:#C2185B,stroke:#AD1457,stroke-width:2px,color:#FFF
    classDef observeLayer fill:#00897B,stroke:#00695C,stroke-width:2px,color:#FFF
    classDef infraLayer fill:#5D4037,stroke:#4E342E,stroke-width:2px,color:#FFF

    class UI,API userLayer
    class OPA,IAM policyLayer
    class CPU,GPU,MEM computeLayer
    class DATA_API,GRAPH_SVC,PROVISIONER appLayer
    class FALKOR,POSTGRES,REDIS dataLayer
    class FUSEKI,PIPELINE semanticLayer
    class COMPOSER orchestrationLayer
    class PROM,LOKI,TEMPO,GRAFANA observeLayer
    class VPC,STORAGE infraLayer
